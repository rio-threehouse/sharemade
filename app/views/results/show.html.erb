<div class="row margin-top20">

  <div class="col-sm-9 col-sm-push-3">
    <div class='panel'>
      <div class="panel-body result">
        <% if @result.user == current_user %>
          <%= link_to edit_result_path(@result) do %>
            <div class="text-right margin-bottom10">
              <i class="fas fa-pencil-ruler"></i> 編集する
            </div>
          <% end %>
        <% end %>
        <div class="border-left">
          <div class="padding-left">
            <%= @result.subtitle %>
            <h3 class="title"><%= @result.title %></h3>
            <div>URL <%= @result.url %></div>
            by <%= link_to @result.user.name, user_path(@result.user) %>
          </div>
        </div>

        <a href="<%= @result.url %>" target="_blank" class="btn btn-success btn-block margin-top20 margin-bottom10">作品を見る</a>
        <div class="text-center">
          <span id="good_btn_<%= @result.id %>">
            <%= render 'goods/good_btn', result: @result %>
          </span>

          <span class="comment">
            <span class="margin-right10"><i class="far fa-comment fa-lg"></i></span> <%= @comments.count %>
          </span>    
        </div>
        

        <div class="margin-top20">
          <%= simple_format(@result.detail) %>
        </div>
        
        <% unless @result.github == "" %>
          <div class="margin-top10">
            <i class="fab fa-github fa-lg"></i> <a href="<%= @result.github %>" target="_blank"><%= @result.github %></a>
          </div>
        <% end %>
        
      </div>
    </div>

    <%# コメント欄 %>
    <div class="panel">
      <div class="panel-body">
        <% @comments.each do |comment| %>
          <% if comment.user == @result.user %>
            <i class="fas fa-user"></i>
          <% end %>
          <%= link_to comment.user.name, user_path(comment.user) %>
          <span class="pull-right text-muted margin-right10"><%= comment.created_at.strftime('%Y/%m/%d') %></span>
          <% if comment.user == current_user %>
            <span class="pull-right margin-right10">
              <%= link_to comment_path(comment), method: :delete, class: 'text-danger', data: { confirm: '本当に削除しますか？'} do %>
                <i class="fas fa-trash-alt"></i>
              <% end %>
            </span>
          <% end %>
          <div class="box margin-bottom10"><%= simple_format(comment.comment) %></div>
        <% end %>

        <%= form_for(@comment) do |f| %>
          <div class="form-group">
            <%= f.label :comment do %>
              <i class="far fa-comment"></i> コメントを投稿する
            <% end %>
            <%= render 'layouts/error_messages', model: f.object %>
            <%= f.text_area :comment, placeholder: 'コメントを入力してください', class: 'form-control', rows: 5, required: true %>
          </div>
          <%= hidden_field_tag :result_id, @result.id %>
          <%= f.submit '投稿', class: 'btn btn-info pull-right' %>
        <% end %>
      </div>
    </div>
  </div>

  <div class="col-sm-3 col-sm-pull-9">
    <div class="panel">
      <div class="panel-heading partition text-center">
        制作者
      </div>
      <div class="panel-body">
        <b><i class="fas fa-user"></i> <%= link_to @result.user.name, user_path(@result.user) %></b>
        <p><%= @result.user.yourself %></p>
        <% unless @result.user.skill == "" %>
          <b>▷言語・スキル</b>
          <p><%= @result.user.skill %></p>
        <% end %>
      </div>
    </div>
  </div>

</div>
